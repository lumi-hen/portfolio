<%- include('../layouts/adminheader.ejs') %>

<div class="section">
	<h2 class="section__title login__title">Edit a product</h2>
    <span class="section__subtitle"></span>
    <hr>
	<div class="login__container grid">
		<a href="/admin/products" class="button button--flex add__button--admin">Back to all products</a>
		<form method="post" action="/admin/products/edit-product/<%= id %>" class="login__form grid" enctype="multipart/form-data">
			<div class="login__content">
                <label class="login__label" for="title">Title</label>
                <input type="text" class="login__input" name="title"  placeholder="Title" value="<%= title %>">
			</div>
            <div class="login__content">
                <label class="login__label" for="desc">Description</label>
                <textarea class="login__input no__resize" name="desc"  placeholder="Description" cols="0" rows="7"><%= desc %></textarea> 
			</div>
            <div class="login__content">
                <label for="category" class="login__label">Category</label>
                <select name="category" class="login__input">
                    <% categories.forEach(function(cat) { %>
                        <option value="<%= cat.slug %>"
                        <% if (cat.slug == category) { %>
                             selected="selected"
                        <% } %>
                        ><%= cat.title %> </option>
                    <% }); %>
                </select>
			</div>
            <div class="login__content">
                <label class="login__label" for="price">Price</label>
                <input type="text" class="login__input" name="price"  placeholder="Price" value="<%= price %>">
			</div>
            <div class="login__content">
                <label class="login__label" for="price">Quantity</label>
                <input type="number" class="login__input" name="quantity"  placeholder="Quantity" value="<%= quantity %>">
			</div>
            <div class="login__content">
                <label class="login__label" for="currentimage">Current image</label>
                <div>
                    <% if (image == "") { %>
                        <img id="noImage" src="/images/no_image.jpg">
                    <% } else { %>
                        <img id="noImage" src="/product_images/<%= id %>/<%= image %>">
                    <% } %>
                </div>
			</div>
            <div class="login__content">
                <label class="login__label" for="image">Image</label>
                <input type="file" class="login__input" name="image" id="img">
			</div>

            <input type="hidden" name="pimage" value="<%= image %> ">
			<button type="submit" class="button button--flex login__button">Submit</button>
		</form>
	</div>
</div>


<%- include('../layouts/footer.ejs') %>
